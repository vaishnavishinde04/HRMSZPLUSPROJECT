<!DOCTYPE html>
<html lang="en">

<head>

	<style>
		input.form-control:focus {
			color: white;
			/* Text color when focused */
		}
	</style>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title>Corona Admin</title>
	<!-- plugins:css -->
	<link rel="stylesheet" href="/DashboardC/assets/vendors/mdi/css/materialdesignicons.min.css">
	<link rel="stylesheet" href="/DashboardC/assets/vendors/css/vendor.bundle.base.css">
	<!-- endinject -->
	<!-- Plugin css for this page -->
	<!-- End Plugin css for this page -->
	<!-- inject:css -->
	<!-- endinject -->
	<!-- Layout styles -->
	<link rel="stylesheet" href="/DashboardC/assets/css/style.css">
	<!-- End layout styles -->
	<link rel="shortcut icon" href="/DashboardC/assets/images/favicon.png" />
</head>

<body>
	<div class="container-scroller">
		<!-- partial:/DashboardC/partials/_sidebar.html -->
		<nav class="sidebar sidebar-offcanvas" id="sidebar">

			<!-- Corona logo-->
			<div class="sidebar-brand-wrapper d-none d-lg-flex align-items-center justify-content-center fixed-top">
				<a class="sidebar-brand brand-logo" href="/dashboard"><img src="../../DashboardC/assets/images/logo.png"
						alt="logo" /></a>
				<a class="sidebar-brand brand-logo-mini" href="/dashboard"><img
						src="../../DashboardC/assets/images/logo.png" alt="logo" /></a>
			</div>

			<ul class="nav">
				<li class="nav-item profile">
					<div class="profile-desc">
						<div class="profile-pic">
							<div class="count-indicator">
								<img class="img-xs rounded-circle " src="DashboardC/assets/images/faces/face15.jpg"
									alt="">
								<span class="count bg-success"></span>
							</div>
							<div class="profile-name">
								<h5 class="mb-0 font-weight-normal" th:text="${session.otpVerifiedUser}"></h5>
								<span th:text="${session.otpVerifiedUserRole}"></span>
							</div>
						</div>
					</div>
				</li>
				<li class="nav-item nav-category"
					th:if="${session.otpVerifiedUserRole =='Admin'|| session.otpVerifiedUserRole =='Manager' || session.otpVerifiedUserRole =='HR' || session.otpVerifiedUserRole =='Employee'}">
					<span class="nav-link">Payroll System</span>
				</li>
				<li class="nav-item menu-items" th:if="${session.otpVerifiedUserRole =='Admin'}">
					<a class="nav-link" href="/allowances">
						<span class="menu-icon">
							<i class="mdi mdi-speedometer"></i>
						</span>
						<span class="menu-title">Allowance</span>
					</a>
				</li>
				<li class="nav-item menu-items" th:if="${session.otpVerifiedUserRole =='Admin'}">
					<a class="nav-link" href="/deductions">
						<span class="menu-icon">
							<i class="mdi mdi-playlist-play"></i>
						</span>
						<span class="menu-title">Deduction</span>
					</a>
				</li>
				<li class="nav-item menu-items"
					th:if="${session.otpVerifiedUserRole =='Admin' || session.otpVerifiedUserRole =='HR'}">
					<a class="nav-link" href="/employees">
						<span class="menu-icon">
							<i class="mdi mdi-table-large"></i>
						</span>
						<span class="menu-title">Employee</span>
					</a>
				</li>
				<li class="nav-item menu-items" th:if="${session.otpVerifiedUserRole =='Admin'}">
					<a class="nav-link" href="/designations">
						<span class="menu-icon">
							<i class="mdi mdi-chart-bar"></i>
						</span>
						<span class="menu-title">Designation</span>
					</a>
				</li>
				<li class="nav-item menu-items" th:if="${session.otpVerifiedUserRole =='Admin'}">
					<a class="nav-link" href="/departments">
						<span class="menu-icon">
							<i class="mdi mdi-contacts"></i>
						</span>
						<span class="menu-title">Department</span>
					</a>
				</li>
				<li class="nav-item menu-items" th:if="${session.otpVerifiedUserRole =='Admin'}">
					<a class="nav-link" href="/banks">
						<span class="menu-icon">
							<i class="mdi mdi-contacts"></i>
						</span>
						<span class="menu-title">Bank</span>
					</a>
				</li>
				<li class="nav-item menu-items" th:if="${session.otpVerifiedUserRole =='Admin'}">
					<a class="nav-link" href="/availableUsers">
						<span class="menu-icon">
							<i class="mdi mdi-chart-bar"></i>
						</span>
						<span class="menu-title">Users</span>
					</a>
				</li>
				<li class="nav-item menu-items"
					th:if="${session.otpVerifiedUserRole =='Admin' || session.otpVerifiedUserRole =='HR' || session.otpVerifiedUserRole =='Manager' || session.otpVerifiedUserRole =='Employee' }">
					<a class="nav-link" href="../../pages/icons/mdi.html">
						<span class="menu-icon">
							<i class="mdi mdi-contacts"></i>
						</span>
						<span class="menu-title">Salary Slips</span>
					</a>
				</li>
				<li class="nav-item menu-items" th:if="${session.otpVerifiedUserRole =='HR'}">
					<a class="nav-link" href="../../pages/icons/mdi.html">
						<span class="menu-icon">
							<i class="mdi mdi-contacts"></i>
						</span>
						<span class="menu-title">Assign Allowance</span>
					</a>
				</li>
				<li class="nav-item nav-category"
					th:if="${session.otpVerifiedUserRole =='Admin' || session.otpVerifiedUserRole =='HR' || session.otpVerifiedUserRole =='Manager' || session.otpVerifiedUserRole =='Employee'}">
					<span class="nav-link">Attendance System</span>
				</li>
				<li class="nav-item menu-items"
					th:if="${session.otpVerifiedUserRole =='Admin' || session.otpVerifiedUserRole =='HR'}">
					<a class="nav-link" href="/holidays">
						<span class="menu-icon">
							<i class="mdi mdi-table-large"></i>
						</span>
						<span class="menu-title">Holidays</span>
					</a>
				</li>
				<li class="nav-item menu-items"
					th:if="${session.otpVerifiedUserRole =='Admin' || session.otpVerifiedUserRole =='Manager'|| session.otpVerifiedUserRole =='Employee'}">
					<a class="nav-link"
						th:href="${session.otpVerifiedUserRole == 'Employee' ? '/leaves/new' : '/leaves'}">
						<span class="menu-icon">
							<i class="mdi mdi-table-large"></i>
						</span>
						<span class="menu-title">Leaves</span>
					</a>
				</li>
				<li class="nav-item menu-items"
					th:if="${session.otpVerifiedUserRole =='Admin' || session.otpVerifiedUserRole =='HR'}">
					<a class="nav-link" href="/workdays">
						<span class="menu-icon">
							<i class="mdi mdi-table-large"></i>
						</span>
						<span class="menu-title">WorkDays</span>
					</a>
				</li>
				<li class="nav-item menu-items"
					th:if="${session.otpVerifiedUserRole =='Admin'|| session.otpVerifiedUserRole =='Manager' || session.otpVerifiedUserRole =='Employee'}">
					<a class="nav-link" href="../../pages/tables/basic-table.html">
						<span class="menu-icon">
							<i class="mdi mdi-table-large"></i>
						</span>
						<span class="menu-title">Attendance Report</span>
					</a>
				</li>
				<li class="nav-item nav-category"
					th:if="${session.otpVerifiedUserRole =='Admin'|| session.otpVerifiedUserRole =='Manager' || session.otpVerifiedUserRole =='HR'}">
					<span class="nav-link">Human Resource Management</span>
				</li>
				<li class="nav-item menu-items"
					th:if="${session.otpVerifiedUserRole =='Admin'|| session.otpVerifiedUserRole =='Manager' || session.otpVerifiedUserRole =='HR'}">
					<a class="nav-link" href="../../pages/tables/basic-table.html">
						<span class="menu-icon">
							<i class="mdi mdi-table-large"></i>
						</span>
						<span class="menu-title">Open Projects</span>
					</a>
				</li>
				<li class="nav-item menu-items"
					th:if="${session.otpVerifiedUserRole =='Admin'|| session.otpVerifiedUserRole =='Manager' || session.otpVerifiedUserRole =='HR'}">
					<a class="nav-link" href="../../pages/tables/basic-table.html">
						<span class="menu-icon">
							<i class="mdi mdi-table-large"></i>
						</span>
						<span class="menu-title">Demand</span>
					</a>
				</li>
				<li class="nav-item menu-items"
					th:if="${session.otpVerifiedUserRole =='Admin'|| session.otpVerifiedUserRole =='Manager' || session.otpVerifiedUserRole =='HR' || session.otpVerifiedUserRole =='Employee'}">
					<a class="nav-link" href="../../pages/tables/basic-table.html">
						<span class="menu-icon">
							<i class="mdi mdi-table-large"></i>
						</span>
						<span class="menu-title">Interviews</span>
					</a>
				</li>
			</ul>
		</nav>
		<!-- partial -->
		<div class="container-fluid page-body-wrapper">
			<!-- partial:/DashboardC/partials/_navbar.html -->
			<nav class="navbar p-0 fixed-top d-flex flex-row">
				<div class="navbar-brand-wrapper d-flex d-lg-none align-items-center justify-content-center">
					<a class="navbar-brand brand-logo-mini" href="/DashboardC/index.html"><img
							src="/DashboardC/assets/images/logo-mini.svg" alt="logo" /></a>
				</div>
				<div class="navbar-menu-wrapper flex-grow d-flex align-items-stretch">
					<button class="navbar-toggler navbar-toggler align-self-center" type="button"
						data-toggle="minimize">
						<span class="mdi mdi-menu"></span>
					</button>



					<ul class="navbar-nav w-100"> <!--mobile view space-->

					</ul>




					<ul class="navbar-nav navbar-nav-right">
						<li class="nav-item dropdown d-none d-lg-block">
							<a class="nav-link btn btn-success create-new-button" id="createbuttonDropdown"
								data-toggle="dropdown" aria-expanded="false" href="#">+ Create New Project</a>
						</li>





						<li class="nav-item dropdown">
							<a class="nav-link" id="profileDropdown" href="#" data-toggle="dropdown">
								<div class="navbar-profile">
									<img class="img-xs rounded-circle" src="/DashboardC/assets/images/faces/face15.jpg"
										alt="">
									<p class="mb-0 d-none d-sm-block navbar-profile-name"
										th:text="${session.otpVerifiedUser}"></p>
									<i class="mdi mdi-menu-down d-none d-sm-block"></i>
								</div>
							</a>

							<div class="dropdown-menu dropdown-menu-right navbar-dropdown preview-list"
								aria-labelledby="profileDropdown">
								<h6 class="p-3 mb-0">Profile</h6>
								<div class="dropdown-divider"></div>

								<div class="dropdown-divider"></div>
								<a class="dropdown-item preview-item">
									<div class="preview-thumbnail">
										<div class="preview-icon bg-dark rounded-circle">
											<i class="mdi mdi-logout text-danger"></i>
										</div>
									</div>
									<div class="preview-item-content">
										<p class="preview-subject mb-1">Log out</p>
									</div>
								</a>

						</li>
					</ul>
					<button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button"
						data-toggle="offcanvas">
						<span class="mdi mdi-format-line-spacing"></span>
					</button>
				</div>
			</nav>

			<div class="main-panel">
				<div class="content-wrapper">
					<div class="page-header">
						<h3 class="page-title"> Add workday </h3>
					</div>
					<div class="row">
						<div class="col-12 grid-margin">
							<div class="card">
								<div class="card-body">
									<form class="form-sample" th:action="@{/workday/{id}(id=${workday.workdayId})}"
										th:object="${workday}" method="POST" id="dayForm">




										<div class="row">

											<div class="col-md-6">
												<div class="form-group row">
													<label class="col-sm-3 col-form-label">Workdays Year</label>
													<div class="col-sm-9">
														<select name="year" id="year" th:field="*{yearOfWorkday}"
															class="form-control" style="color: white;">
															<option value="2020">2020</option>
															<option value="2021">2021</option>
															<option value="2022">2022</option>
															<option value="2023">2023</option>
														</select>
													</div>
												</div>
											</div>

											<div class="col-md-6">
												<div class="form-group row">
													<label class="col-sm-3 col-form-label">Workday Month</label>
													<div class="col-sm-9">
														<select name="month" id="month" class="form-control"
															th:field="*{monthOfWorkday}" style="color: white;">
															<option value="0">January</option>
															<option value="1">February</option>
															<option value="2">March</option>
															<option value="3">April</option>
															<option value="4">May</option>
															<option value="5">June</option>
															<option value="6">July</option>
															<option value="7">August</option>
															<option value="8">September</option>
															<option value="9">October</option>
															<option value="10">November</option>
															<option value="11">December</option>
														</select>
													</div>
												</div>
											</div>


											<div class="col-md-6">
												<div class="form-group row">
													<label class="col-sm-3 col-form-label">Select working days for
														month</label>
													<div class="col-sm-9">
														<!--	<div class="form-check">
															<input type="checkbox" class="form-check-input" name="day"
																id="sunday" value="Sunday">
															<label class="form-check-label" for="sunday">Sunday</label>
														</div>
-->

														<div class="form-check">
															<input type="checkbox" class="form-check-input" name="day"
																id="sunday" value="Sunday"
																th:checked="${selectedDaysOfWeek != null && selectedDaysOfWeek.contains('Sunday')}" />
															<label class="form-check-label" for="sunday">Sunday</label>
														</div>


														<div class="form-check">
															<input type="checkbox" class="form-check-input" name="day"
																id="monday" value="Monday"
																th:checked="${selectedDaysOfWeek != null && selectedDaysOfWeek.contains('Monday')}" />
															<label class="form-check-label" for="monday">Monday</label>
														</div>

														<div class="form-check">
															<input type="checkbox" class="form-check-input" name="day"
																id="tuesday" value="Tuesday"
																th:checked="${selectedDaysOfWeek != null && selectedDaysOfWeek.contains('Tuesday')}" />
															<label class="form-check-label"
																for="tuesday">Tuesday</label>
														</div>

														<div class="form-check">
															<input type="checkbox" class="form-check-input" name="day"
																id="wednesday" value="Wednesday"
																th:checked="${selectedDaysOfWeek != null && selectedDaysOfWeek.contains('Wednesday')}" />
															<label class="form-check-label"
																for="wednesday">Wednesday</label>
														</div>

														<div class="form-check">
															<input type="checkbox" class="form-check-input" name="day"
																id="thursday" value="Thursday"
																th:checked="${selectedDaysOfWeek != null && selectedDaysOfWeek.contains('Thursday')}" />
															<label class="form-check-label"
																for="thursday">Thursday</label>
														</div>

														<div class="form-check">
															<input type="checkbox" class="form-check-input" name="day"
																id="friday" value="Friday"
																th:checked="${selectedDaysOfWeek != null && selectedDaysOfWeek.contains('Friday')}" />
															<label class="form-check-label" for="friday">Friday</label>
														</div>

														<div class="form-check">
															<input type="checkbox" class="form-check-input" name="day"
																id="saturday" value="Saturday"
																th:checked="${selectedDaysOfWeek != null && selectedDaysOfWeek.contains('Saturday')}" />
															<label class="form-check-label"
																for="saturday">Saturday</label>
														</div>

													</div>
												</div>
											</div>



										</div>
										<br>
										<input type="hidden" name="noOfWorkdays" id="noOfWorkdays"
											th:field="*{noOfWorkdays}">

										<input type="hidden" name="selectedDaysOfWeek" id="selectedDaysOfWeek"
											th:field="*{selectedDaysOfWeek}">


										<center>
											<input type="submit" class="btn btn-success btn-rounded btn-fw"
												value="Submit">

											<!-- Add multiple non-breaking spaces to create space between the buttons -->
											<button type="button" class="btn btn-primary btn-rounded btn-fw"
												onclick="window.location.href='/workdays'">Back</button>
										</center>
									</form>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- page-body-wrapper ends -->
		</div>
		<!-- container-scroller -->
		<!-- plugins:js -->
		<script src="/DashboardC/assets/vendors/js/vendor.bundle.base.js"></script>
		<!-- endinject -->
		<!-- Plugin js for this page -->
		<!-- End plugin js for this page -->
		<!-- inject:js -->
		<script src="/DashboardC/assets/js/off-canvas.js"></script>
		<script src="/DashboardC/assets/js/hoverable-collapse.js"></script>
		<script src="/DashboardC/assets/js/misc.js"></script>
		<script src="/DashboardC/assets/js/settings.js"></script>
		<script src="/DashboardC/assets/js/todolist.js"></script>

		<script>

			document.getElementById("dayForm").addEventListener("submit", function (e) {
				// e.preventDefault(); 
				console.log("Submit button clicked."); // Check if the event handler is triggered
				const year = parseInt(document.getElementById("year").value);
				const monthIndex = parseInt(document.getElementById("month").value);
				const checkedBoxes = document.querySelectorAll('input[name="day"]:checked');

				let resultStr = "";
				let totalCount = 0; // Initialize total count variable
				let selectedDaysOfWeek = []; // Initialize an array to store selected days



				checkedBoxes.forEach(checkbox => {
					const dayCount = countDays(year, monthIndex, checkbox.value);
					totalCount += dayCount; // Accumulate the count
					resultStr += `${checkbox.value}: ${dayCount} times<br>`;
					selectedDaysOfWeek.push(checkbox.value); // Push the selected day to the array
				});
				console.log("Before forEach loop");
				checkedBoxes.forEach(checkbox => {
					console.log(checkbox.value);
				});
				console.log("After forEach loop");




				// Display the total count
				resultStr += `Total: ${totalCount} days<br>`;

				// Convert totalCount to a string and assign it to the noOfWorkdays field
				document.getElementById("noOfWorkdays").value = totalCount.toString();

				// Set the selectedDays array as a comma-separated string in the hidden input
				document.getElementById("selectedDaysOfWeek").value = selectedDaysOfWeek.join(',');

			});



			function countDays(year, monthIndex, day) {
				const days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
				const startDate = new Date(year, monthIndex, 1);
				const endDate = new Date(year, monthIndex + 1, 0);

				let count = 0;
				for (let i = startDate.getDate(); i <= endDate.getDate(); i++) {
					const checkDate = new Date(year, monthIndex, i);
					if (days[checkDate.getDay()] === day) {
						count++;
					}
				}
				return count;
			}

		</script>




		<!-- endinject -->
		<!-- Custom js for this page -->
		<!-- End custom js for this page -->
</body>

</html>